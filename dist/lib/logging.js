var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Logger_1, Level_1, LogRecord_1;
/** Library asset:logging/lib/logging.dart */
import { is, isNot } from "@dart2ts/dart/_common";
import { defaultConstructor, namedConstructor, namedFactory, defaultFactory, DartClass, Implements, op, Op, OperatorMethods } from "@dart2ts/dart/utils";
import * as core from "@dart2ts/dart/core";
import * as async from "@dart2ts/dart/async";
let Logger = Logger_1 = class Logger {
    constructor(name) {
    }
    get fullName() {
        return (op(Op.EQUALS, this.parent, null) || this.parent.name == '') ? this.name : `${this.parent.fullName}.${this.name}`;
    }
    static $Logger(name) {
        return Logger_1._loggers.putIfAbsent(name, () => {
            return new Logger_1._named(name);
        });
    }
    static $detached(name) {
        return new Logger_1._internal(name, null, new core.DartMap());
    }
    static $_named(name) {
        if (new core.DartString(name).startsWith(new core.DartString('.'))) {
            throw new core.ArgumentError("name shouldn't start with a '.'");
        }
        let dot = new core.DartString(name).lastIndexOf(new core.DartString('.'));
        let parent = null;
        let thisName;
        if (dot == -1) {
            if (name != '')
                parent = new Logger_1('');
            thisName = name;
        }
        else {
            parent = new Logger_1(new core.DartString(name).substring(0, dot));
            thisName = new core.DartString(name).substring(dot + 1);
        }
        return new Logger_1._internal(thisName, parent, new core.DartMap());
    }
    _internal(name, parent, children) {
        this._children = children;
        this.children = new core.DartUnmodifiableMapView(children);
        this.name = name;
        this.parent = parent;
        if (this.parent != null)
            this.parent._children.set(this.name, this);
    }
    get level() {
        if (properties.hierarchicalLoggingEnabled) {
            if (this._level != null)
                return this._level;
            if (this.parent != null)
                return this.parent.level;
        }
        return properties._rootLevel;
    }
    set level(value) {
        if (properties.hierarchicalLoggingEnabled && this.parent != null) {
            this._level = value;
        }
        else {
            if (this.parent != null) {
                throw new core.UnsupportedError('Please set "hierarchicalLoggingEnabled" to true if you want to ' + 'change the level on a non-root logger.');
            }
            properties._rootLevel = value;
        }
    }
    get onRecord() {
        return this._getStream();
    }
    clearListeners() {
        if (properties.hierarchicalLoggingEnabled || op(Op.EQUALS, this.parent, null)) {
            if (this._controller != null) {
                this._controller.close();
                this._controller = null;
            }
        }
        else {
            Logger_1.root.clearListeners();
        }
    }
    isLoggable(value) {
        return (op(Op.GEQ, value, this.level));
    }
    log(logLevel, message, error, stackTrace, zone) {
        if (this.isLoggable(logLevel)) {
            if (is(message, Function))
                message = message();
            if (isNot(message, "string"))
                message = message.toString();
            if (op(Op.EQUALS, stackTrace, null) && op(Op.GEQ, logLevel, properties.recordStackTraceAtLevel)) {
                try {
                    throw `autogenerated stack trace for ${logLevel} ${message}`;
                }
                catch (e) {
                    let t = new core.DartStackTrace.fromError(e);
                    stackTrace = t;
                    if (op(Op.EQUALS, error, null))
                        error = e;
                }
            }
            if (op(Op.EQUALS, zone, null))
                zone = async.DartZone.current;
            let record = new LogRecord(logLevel, message, this.fullName, error, stackTrace, zone);
            if (properties.hierarchicalLoggingEnabled) {
                let target = this;
                while (target != null) {
                    target._publish(record);
                    target = target.parent;
                }
            }
            else {
                Logger_1.root._publish(record);
            }
        }
    }
    finest(message, error, stackTrace) {
        return this.log(Level.FINEST, message, error, stackTrace);
    }
    finer(message, error, stackTrace) {
        return this.log(Level.FINER, message, error, stackTrace);
    }
    fine(message, error, stackTrace) {
        return this.log(Level.FINE, message, error, stackTrace);
    }
    config(message, error, stackTrace) {
        return this.log(Level.CONFIG, message, error, stackTrace);
    }
    info(message, error, stackTrace) {
        return this.log(Level.INFO, message, error, stackTrace);
    }
    warning(message, error, stackTrace) {
        return this.log(Level.WARNING, message, error, stackTrace);
    }
    severe(message, error, stackTrace) {
        return this.log(Level.SEVERE, message, error, stackTrace);
    }
    shout(message, error, stackTrace) {
        return this.log(Level.SHOUT, message, error, stackTrace);
    }
    _getStream() {
        if (properties.hierarchicalLoggingEnabled || op(Op.EQUALS, this.parent, null)) {
            if (op(Op.EQUALS, this._controller, null)) {
                this._controller = new async.DartStreamController.broadcast({
                    sync: true
                });
            }
            return this._controller.stream;
        }
        else {
            return Logger_1.root._getStream();
        }
    }
    _publish(record) {
        if (this._controller != null) {
            this._controller.add(record);
        }
    }
    static get root() {
        if (this.__$root === undefined) {
            this.__$root = new Logger_1('');
        }
        return this.__$root;
    }
    static set root(__$value) {
        this.__$root = __$value;
    }
    static get _loggers() {
        if (this.__$_loggers === undefined) {
            this.__$_loggers = new core.DartMap.literal([]);
        }
        return this.__$_loggers;
    }
    static set _loggers(__$value) {
        this.__$_loggers = __$value;
    }
};
__decorate([
    namedConstructor
], Logger.prototype, "_internal", null);
__decorate([
    defaultFactory
], Logger, "$Logger", null);
__decorate([
    namedFactory
], Logger, "$detached", null);
__decorate([
    namedFactory
], Logger, "$_named", null);
Logger = Logger_1 = __decorate([
    DartClass
], Logger);
export { Logger };
let Level = Level_1 = class Level {
    constructor(name, value) {
    }
    Level(name, value) {
        this.name = name;
        this.value = value;
    }
    static get ALL() {
        if (this.__$ALL === undefined) {
            this.__$ALL = new Level_1('ALL', 0);
        }
        return this.__$ALL;
    }
    static get OFF() {
        if (this.__$OFF === undefined) {
            this.__$OFF = new Level_1('OFF', 2000);
        }
        return this.__$OFF;
    }
    static get FINEST() {
        if (this.__$FINEST === undefined) {
            this.__$FINEST = new Level_1('FINEST', 300);
        }
        return this.__$FINEST;
    }
    static get FINER() {
        if (this.__$FINER === undefined) {
            this.__$FINER = new Level_1('FINER', 400);
        }
        return this.__$FINER;
    }
    static get FINE() {
        if (this.__$FINE === undefined) {
            this.__$FINE = new Level_1('FINE', 500);
        }
        return this.__$FINE;
    }
    static get CONFIG() {
        if (this.__$CONFIG === undefined) {
            this.__$CONFIG = new Level_1('CONFIG', 700);
        }
        return this.__$CONFIG;
    }
    static get INFO() {
        if (this.__$INFO === undefined) {
            this.__$INFO = new Level_1('INFO', 800);
        }
        return this.__$INFO;
    }
    static get WARNING() {
        if (this.__$WARNING === undefined) {
            this.__$WARNING = new Level_1('WARNING', 900);
        }
        return this.__$WARNING;
    }
    static get SEVERE() {
        if (this.__$SEVERE === undefined) {
            this.__$SEVERE = new Level_1('SEVERE', 1000);
        }
        return this.__$SEVERE;
    }
    static get SHOUT() {
        if (this.__$SHOUT === undefined) {
            this.__$SHOUT = new Level_1('SHOUT', 1200);
        }
        return this.__$SHOUT;
    }
    static get LEVELS() {
        if (this.__$LEVELS === undefined) {
            this.__$LEVELS = new core.DartList.literal(Level_1.ALL, Level_1.FINEST, Level_1.FINER, Level_1.FINE, Level_1.CONFIG, Level_1.INFO, Level_1.WARNING, Level_1.SEVERE, Level_1.SHOUT, Level_1.OFF);
        }
        return this.__$LEVELS;
    }
    [OperatorMethods.EQUALS](other) {
        return is(other, Level_1) && this.value == other.value;
    }
    [OperatorMethods.LT](other) {
        return this.value < other.value;
    }
    [OperatorMethods.LEQ](other) {
        return this.value <= other.value;
    }
    [OperatorMethods.GT](other) {
        return this.value > other.value;
    }
    [OperatorMethods.GEQ](other) {
        return this.value >= other.value;
    }
    compareTo(other) {
        return this.value - other.value;
    }
    get hashCode() {
        return this.value;
    }
    toString() {
        return this.name;
    }
};
__decorate([
    defaultConstructor
], Level.prototype, "Level", null);
Level = Level_1 = __decorate([
    DartClass,
    Implements(core.DartComparable)
], Level);
export { Level };
let LogRecord = LogRecord_1 = class LogRecord {
    constructor(level, message, loggerName, error, stackTrace, zone) {
    }
    static get _nextNumber() {
        if (this.__$_nextNumber === undefined) {
            this.__$_nextNumber = 0;
        }
        return this.__$_nextNumber;
    }
    static set _nextNumber(__$value) {
        this.__$_nextNumber = __$value;
    }
    LogRecord(level, message, loggerName, error, stackTrace, zone) {
        this.time = new core.DartDateTime.now();
        this.sequenceNumber = LogRecord_1._nextNumber++;
        this.level = level;
        this.message = message;
        this.loggerName = loggerName;
        this.error = error;
        this.stackTrace = stackTrace;
        this.zone = zone;
    }
    toString() {
        return `[${this.level.name}] ${this.loggerName}: ${this.message}`;
    }
};
__decorate([
    defaultConstructor
], LogRecord.prototype, "LogRecord", null);
LogRecord = LogRecord_1 = __decorate([
    DartClass
], LogRecord);
export { LogRecord };
export class properties {
    static get hierarchicalLoggingEnabled() {
        if (this.__$hierarchicalLoggingEnabled === undefined) {
            this.__$hierarchicalLoggingEnabled = false;
        }
        return this.__$hierarchicalLoggingEnabled;
    }
    static set hierarchicalLoggingEnabled(__$value) {
        this.__$hierarchicalLoggingEnabled = __$value;
    }
    static get recordStackTraceAtLevel() {
        if (this.__$recordStackTraceAtLevel === undefined) {
            this.__$recordStackTraceAtLevel = Level.OFF;
        }
        return this.__$recordStackTraceAtLevel;
    }
    static set recordStackTraceAtLevel(__$value) {
        this.__$recordStackTraceAtLevel = __$value;
    }
    static get _rootLevel() {
        if (this.__$_rootLevel === undefined) {
            this.__$_rootLevel = Level.INFO;
        }
        return this.__$_rootLevel;
    }
    static set _rootLevel(__$value) {
        this.__$_rootLevel = __$value;
    }
}
//# sourceMappingURL=logging.js.map